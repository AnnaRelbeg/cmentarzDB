<!DOCTYPE html>
<html lang="pl">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VTCGE95WD2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VTCGE95WD2');
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Oficjalna strona Cmentarza w Dąbrówkach Breńskich – znajdź groby, zapal znicz, dodaj wspomnienie.">
  <meta property="og:title" content="Cmentarz Dąbrówki Breńskie" />
<meta property="og:description" content="Znajdź groby, zapal znicz, dodaj wspomnienie. Oficjalna strona cmentarza parafialnego." />
<meta property="og:url" content="https://www.cmentarzdabrowkibrenskie.pl/" />
<meta name="twitter:card" content="summary_large_image" />

  <title>Cmentarz Dąbrówki Breńskie – Strona Główna</title>
  <link rel="icon" href="assets/images/1.png" type="image/png">
  <link rel="apple-touch-icon" href="/assets/images/1.png">
<meta name="theme-color" content="#6a8b5f">

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Open+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <!-- AOS Library (Animate on Scroll) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
  />
  <!-- Swiper CSS -->
<link
rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>
<!-- Firebase App (Core SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>

<!-- Firebase Firestore -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<!-- Firebase Storage (optional if using) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Cmentarz Dąbrówki Breńskie",
    "description": "Oficjalna strona cmentarza w Dąbrówkach Breńskich",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Dąbrówki Breńskie",
      "addressCountry": "PL"
    },
    "url": "https://www.cmentarzdabrowkibrenskie.pl"
    "logo": "https://www.cmentarzdabrowkibrenskie.pl/assets/images/1.png"
  }
  </script>
  

</head>
<body>
  <nav class="navbar">
    <button class="menu-button">☰</button>
    <ul>
      <li><a href="index.html">Znajdź Grób</a></li>
      <li><a href="#about">O Cmentarzu</a></li>
      <li><a href="#gallery">Galeria</a></li>
      <li><a href="#zasluzeni">Zasłużeni</a></li>
      <li><a href="#contact">Kontakt</a></li>
      <li><a href="#donations">💖 Wsparcie</a></li>
      <li><a href="admin.html">🛠️ Admin</a></li> <!-- ✅ NEW ADMIN LINK -->      
    </ul>
  </nav>

  <header>
    <div class="content">
      <h1 data-aos="fade-up" data-aos-delay="300">Cmentarz Dąbrówki Breńskie</h1>
      <p data-aos="fade-up" data-aos-delay="300">„Pamięć to forma spotkania, które trwa wiecznie.”</p>
      <div class="search-box" id="header-search">
        <input data-aos="fade-up" data-aos-delay="300" type="text" id="search-input" placeholder="Szukaj imienia lub nazwiska...">
      </div>
      <div id="results-container"></div>
    </div>
  </header>

  <audio id="background-music" loop>
    <source src="assets/images/KevinMacLeod.mp3" type="audio/mpeg">
    Twoja przeglądarka nie obsługuje audio.
  </audio>
  
  <!-- Play button -->
  <button id="play-music-btn" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #6a8b5f;
    color: white;
    border: none;
    padding: 0.75rem 1.2rem;
    font-size: 1rem;
    border-radius: 12px;
    cursor: pointer;
    z-index: 1000;
  ">
    🎵 Włącz muzykę
  </button>


  <section id="about" class="section about" data-aos="fade-up" data-aos-delay="300">
    <h2 data-aos="fade-up" data-aos-delay="300">O Cmentarzu</h2>
    <p data-aos="fade-up" data-aos-delay="300">
        Cmentarz Parafialny p.w. Przemienienia Pańskiego w Dąbrówkach Breńskich to miejsce zadumy, modlitwy i wspomnień. 
        Spoczywają tu mieszkańcy naszej wsi i okolicznych miejscowości – ci, którzy budowali wspólnotę, przekazywali wartości i wiernie kroczyli przez życie. Dzięki tej stronie możesz łatwo odszukać groby bliskich, przejrzeć archiwa i podzielić się wspomnieniami.
    </p>
  </section>

  <section id="gallery" data-aos="fade-up" data-aos-delay="300" class="section gallery">
    <h2>Galeria zdjęć</h2>
    <div class="gallery-container" data-aos="fade-up" data-aos-delay="300">
      <img src="assets/images/brama.JPG" alt="Wejście na Cmentarz Dąbrówki Breńskie">
      <img src="assets/images/michal.jpg" alt="Aniol">
      <img src="assets/images/cm11.jpg" alt="Cmentarz Dąbrówki Breńskie">
      <img src="assets/images/cm22.jpg" alt="Cmentarz Dąbrówki Breńskie">
      <img src="assets/images/cm33.jpg" alt="Cmentarz Dąbrówki Breńskie">
      <img src="assets/images/cm44.jpg" alt="Cmentarz Dąbrówki Breńskie">
      <img src="assets/images/cm55.jpg" alt="Cmentarz Dąbrówki Breńskie">
      <img src="assets/images/cm6.JPG" alt="Cmentarz Dąbrówki Breńskie">
    </div>
  </section>
  
<section id="zasluzeni" class="section zasluzeni">
  <h2>Zasłużeni</h2>

  <div class="person-highlight">
    <h3><a href="profile.html?id=0001">Ks. Władysław Januś</a></h3>
    <p>
      Ks. Władysław Januś (1940–2017) był sercem parafii w Dąbrówkach Breńskich. Jako proboszcz nie tylko prowadził wiernych duchowo, ale z wielką determinacją zainicjował i zrealizował budowę obecnego kościoła. Jego ciepło, pokora i oddanie sprawiły, że na zawsze pozostał w pamięci mieszkańców jako duszpasterz, który potrafił jednoczyć i prowadzić przez życie. Spoczywa w miejscu, które pomógł stworzyć – na naszym parafialnym cmentarzu.
    </p>
  </div>

  <div class="person-highlight">
    <h3><a href="profile.html?id=0001.1">Ks. Michał Łos FDP</a></h3>
    <p>
      Ks. Michał Łos (1991–2019) był młodym kapłanem, który pokazał światu, czym jest prawdziwa wiara i odwaga. Gdy ciężka choroba przerwała jego formację, nie przestał marzyć o kapłaństwie. Dzięki wyjątkowej łasce papieża Franciszka przyjął święcenia w szpitalnej sali i zdążył odprawić trzy Msze Święte. Jego krótkie, ale niezwykle głębokie kapłańskie życie było świadectwem świętości, które poruszyło serca tysięcy ludzi. Spoczywa w grobowcu kapłańskim – w swojej ukochanej rodzinnej parafii.
    </p>
  </div>
</section>

<section id="donations" data-aos="fade-up" data-aos-delay="300" class="section">
  <h2>Wsparcie dla cmentarza</h2>
  <p>
    Cmentarz to przestrzeń pamięci, modlitwy i wdzięczności – miejsce obecności tych, którzy odeszli. Troszcząc się o nie wspólnie, okazujemy miłość i szacunek, który trwa poza czasem.
  </p>
  <p>
    Jeśli czujesz w sercu chęć wsparcia, możesz przekazać dobrowolną darowiznę na rzecz utrzymania cmentarza.
  </p>
  <p>
    <strong>Nr konta parafii:</strong><br>
    <span id="konto-nr">73 9462 1026 2003 3001 1283 0001</span><br>
    <button onclick="copyAccount()" style="
    margin-top: 0.75rem;
    background-color: #6a8b5f;
    color: white;
    padding: 0.5rem 1.2rem;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
  ">
    📋 Kopiuj numer konta
  </button>
  </p>
</section>

<script>
  function copyAccount() {
    const text = document.getElementById("konto-nr").textContent;
    navigator.clipboard.writeText(text).then(() => {
      alert("✅ Numer konta został skopiowany do schowka.");
    });
  }
</script>


  <section id="contact" data-aos="fade-up" data-aos-delay="300" class="section contact">
    <h2 data-aos="fade-up" data-aos-delay="300">Kontakt</h2>
    <p data-aos="fade-up" data-aos-delay="300">
      Masz pytania lub chcesz zgłosić poprawki? Skontaktuj się z nami pod adresem: <br/>
      <a href="mailto:parafia@dabrowkibrenskie.pl">parafia@dabrowkibrenskie.pl</a> lub pod numerem tel. 14-641-21-80 <br> <br>
      <strong>Adres Parafii:</strong> <br>
      PARAFIA RZYMSKOKATOLICKA <br>
      p.w. PRZEMIENIENIA PAŃSKIEGO <br>
      DĄBRÓWKI BREŃSKIE 151 A <br>
      33-210 Olesno <br>
    </p>
  </section>


  <footer data-aos="fade-up" data-aos-delay="300">
    &copy; 2025 Cmentarz Dąbrówki Breńskie. Wszelkie prawa zastrzeżone. <br />
    Projekt: Anna Gebler
  </footer>
  
  
  <!-- AOS Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>
    AOS.init({
      duration: 1000,
      once: true
    });
  </script>

<script>
  document.getElementById('play-music-btn').addEventListener('click', () => {
    const audio = document.getElementById('background-music');
    audio.play();
    document.getElementById('play-music-btn').style.display = 'none';
  });
</script>

<!-- GALLERY -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const lightbox = document.getElementById("lightbox");
    const lightboxImg = document.getElementById("lightbox-img");
    const galleryImages = Array.from(document.querySelectorAll(".gallery-container img"));
    let currentIndex = 0;

    document.getElementById("lightbox-close").addEventListener("click", (e) => {
  e.stopPropagation();
  lightbox.style.display = "none";
});


    function showImage(index) {
      currentIndex = index;
      lightboxImg.src = galleryImages[currentIndex].src;
      lightbox.style.display = "flex";
    }

    galleryImages.forEach((img, index) => {
      img.addEventListener("click", () => showImage(index));
    });

    document.getElementById("lightbox-prev").addEventListener("click", (e) => {
      e.stopPropagation();
      currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
      showImage(currentIndex);
    });

    document.getElementById("lightbox-next").addEventListener("click", (e) => {
      e.stopPropagation();
      currentIndex = (currentIndex + 1) % galleryImages.length;
      showImage(currentIndex);
    });

    lightbox.addEventListener("click", (e) => {
      if (e.target === lightbox || e.target === lightboxImg) {
        lightbox.style.display = "none";
      }
    });

    // ✅ SWIPE SUPPORT
    let touchStartX = 0;
    let touchEndX = 0;

    lightbox.addEventListener("touchstart", (e) => {
      touchStartX = e.changedTouches[0].screenX;
    });

    lightbox.addEventListener("touchend", (e) => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    });

    function handleSwipe() {
      const threshold = 50; // Minimum swipe distance
      const diff = touchEndX - touchStartX;

      if (diff > threshold) {
        // Swipe right → previous
        currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
        showImage(currentIndex);
      } else if (diff < -threshold) {
        // Swipe left → next
        currentIndex = (currentIndex + 1) % galleryImages.length;
        showImage(currentIndex);
      }
    }
  });
</script>


<!-- in index.html -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyChVtFHlA4mDuwx-xi7jLGMWvNYcNrrANM",
    authDomain: "cmentarz-dabrowki.firebaseapp.com",
    projectId: "cmentarz-dabrowki",
    storageBucket: "cmentarz-dabrowki.appspot.com",
    messagingSenderId: "502809191219",
    appId: "1:502809191219:web:9526a28823974e90c91446",
    measurementId: "G-GEDTJPLZ87"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const searchInput = document.querySelector(".search-box input");
  const resultsContainer = document.getElementById("results-container");

let debounceTimeout;

searchInput.addEventListener("input", () => {
  clearTimeout(debounceTimeout);
  debounceTimeout = setTimeout(handleSearch, 1000); // delay search by 400ms after user stops typing
});

async function handleSearch() {
  const normalize = (str) => {
    return str
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g, "")
      .toLowerCase()
      .replace(/ł/g, 'l')
      .replace(/ś/g, 's')
      .replace(/ź/g, 'z')
      .replace(/ż/g, 'z')
      .replace(/ć/g, 'c')
      .replace(/ń/g, 'n')
      .replace(/ę/g, 'e')
      .replace(/ą/g, 'a')
      .replace(/ó/g, 'o');
  };

  const query = normalize(searchInput.value.trim());
  if (!query) {
    resultsContainer.innerHTML = "";
    return;
  }

  const CACHE_DURATION_MS = 12 * 60 * 60 * 1000; // 12 hours
  const now = Date.now();
  const lastFetched = sessionStorage.getItem("zmarli_fetched");
  let cachedData = sessionStorage.getItem("zmarli");

  if (!cachedData || !lastFetched || now - lastFetched > CACHE_DURATION_MS) {
    const snapshot = await getDocs(collection(db, "zmarli"));
    const data = [];
    snapshot.forEach(doc => data.push(doc.data()));
    sessionStorage.setItem("zmarli", JSON.stringify(data));
    sessionStorage.setItem("zmarli_fetched", now);
    cachedData = data;
  } else {
    cachedData = JSON.parse(cachedData);
  }

  const results = [];

  cachedData.forEach((data) => {
    const fullNameNorm = normalize(data.fullName || "");
    const nameMatches = query.split(" ").every(token =>
      fullNameNorm.includes(token)
    );
    if (nameMatches || normalize(String(data.id)).includes(query)) {
      results.push(data);
    }
  });

  displayResults(results);
}



  function displayResults(results) {
  const container = document.getElementById("results-container");
  container.innerHTML = "";

  results.forEach(person => {
    const card = document.createElement("div");
    card.classList.add("person-card");

    card.innerHTML = `
      <img src="${person.photoGallery?.[0] || 'placeholder.jpg'}" alt="${person.fullName}" class="card-image">
      <div class="card-content">
        <h3>${person.fullName}</h3>
        <p><strong>Data urodzenia:</strong> ${person.birthDate}</p>
        <p><strong>Data śmierci:</strong> ${person.deathDate}</p>
        <a class="profile-link-btn" href="profile.html?id=${person.id}" target="_blank">Zobacz profil</a>
      </div>
    `;

    container.appendChild(card);
  });



}


document.addEventListener("DOMContentLoaded", () => {
  const closeBtn = document.querySelector(".modal-close");
  const modal = document.getElementById("person-modal");

  if (closeBtn && modal) {
    closeBtn.addEventListener("click", closeModal);
    window.addEventListener("click", (e) => {
      if (e.target === modal) closeModal();
    });
  } else {
    console.error("Modal close button or modal not found.");
  }
});

</script>
<script>// ---------------------------
  // Mobile Navbar Toggle
  // ---------------------------
  document.addEventListener("DOMContentLoaded", function () {
      const menuToggle = document.querySelector(".menu-button");
      const navMenu = document.querySelector(".navbar ul");
      const navLinks = document.querySelectorAll(".navbar ul li a");
    
      if (menuToggle && navMenu) {
        menuToggle.addEventListener("click", () => {
          navMenu.classList.toggle("active");
        });
    
        navLinks.forEach(link => {
          link.addEventListener("click", () => {
            navMenu.classList.remove("active");
          });
        });
      } else {
        console.error("Menu button or navMenu not found");
      }
    });
    
    //Redirecting from index.html to a Cleaner URL
if (window.location.pathname.indexOf('index.html') > -1) {
    window.location.replace(window.location.pathname.replace('index.html', ''));
  }
    
    </script>
<script src="script.js"></script>

<!-- Lightbox -->
<div class="image-lightbox" id="lightbox">
  <button id="lightbox-close" class="lightbox-close-btn">&times;</button>
  <button id="lightbox-prev" class="lightbox-nav">&#10094;</button>
  <img id="lightbox-img" src="" alt="Pełne zdjęcie" />
  <button id="lightbox-next" class="lightbox-nav">&#10095;</button>
</div>


</body>
</html>